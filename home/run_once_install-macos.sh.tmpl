#!/bin/sh
set -e

if [ "{{ .chezmoi.os }}" != "darwin" ]; then
  exit 0
fi

if ! command -v brew >/dev/null 2>&1; then
  echo "Homebrew is required but not installed." >&2
  exit 1
fi

brew install starship zoxide eza

if [ -d "$HOME/.antidote/.git" ]; then
  git -C "$HOME/.antidote" pull --ff-only
elif [ ! -d "$HOME/.antidote" ]; then
  git clone https://github.com/mattmc3/antidote.git "$HOME/.antidote"
fi
